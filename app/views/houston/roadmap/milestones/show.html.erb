<%= render partial: "projects/header", locals: {project: @project, postfix: @milestone.name} %>

<div id="milestone_view"><div>

<% content_for :javascripts do %>
<script type="text/javascript">
  $(function() {
    var tickets = <%=raw Houston::Roadmap::TicketPresenter.new(@tickets).to_json %>;
    tickets = new Tickets(tickets, {parse: true});
    
    $('#milestone_view').appendView(
      new Roadmap.EditMilestoneView({
        id: <%= @milestone.id %>,
        project: {
          id: <%= @project.id %>,
          slug: <%=raw @project.slug.to_json %>,
          name: <%=raw @project.name.to_json %>,
          ticketTrackerName: <%=raw @project.ticket_tracker_name.to_json %> },
        tickets: tickets,
        openTickets: <%=raw Houston::Roadmap::TicketPresenter.new(@open_tickets).to_json %>
      })
    );
  });
</script>
<% end %>
